# Зміни згідно ТЗ

## Backend

### 1. Нові поля в моделі Ticket
- `incident_type` - тип інциденту (Софтовий баг, Фізична поломка, Не може зарядитись, Перерахунок, Поганий зв'язок, ДВС, Зламалось авто, Інше)
- `port_type` - тип порту (CCS 2, CHADEMO, GBT DC, GBT AC, Type 2 socket, Type 2 plug, Type 1, NACS DC, NACS AC)
- `contact_source` - джерело звернення (телефон, email, telegram, viber, додаток, інше)
- `station_logs` - текстове поле для OCPP логів

### 2. Міграція бази даних
- Створено міграцію `009_add_ticket_fields.py`
- Додано індекс на `incident_type` для швидкої фільтрації

### 3. API
- Додано фільтр `incident_type` в endpoint `/api/v1/tickets`
- Оновлено схеми `TicketCreate`, `TicketUpdate`, `TicketResponse`, `TicketListResponse`

## Frontend

### 1. Нова форма створення тікета
- Створено `CreateTicketNew.tsx` з новим дизайном згідно ТЗ
- Видалено кнопки "Додати станцію" та "Додати оператора"
- Додано поля:
  - Заголовок інциденту (вибір з переліку)
  - Номер інциденту (автогенерація)
  - Відділ (вибір з списку)
  - Станція (пошук по номеру)
  - Порт станції (вибір типу)
  - Контактна інформація (ім'я, телефон, джерело)
  - Опис проблеми
  - Вкладення (файли)
  - Логи станції (текстове поле + кнопка "Розпізнати AI")

### 2. Список тікетів
- Додано фільтр по відділам
- Фільтр по відповідальним вже існував
- Оновлено переклади (uk/en)

## Що потрібно зробити далі

1. Застосувати міграцію на сервері:
   ```bash
   docker-compose exec backend alembic upgrade head
   ```

2. Замінити старий компонент CreateTicket на CreateTicketNew в роутері

3. Реалізувати функцію "Розпізнати AI" для логів (інтеграція з AI API)

4. Додати можливість додавати нові типи інцидентів через адмін-панель (опціонально)
